<!DOCTYPE html>
<html lang="en">
	<head>
	 <!--/*/ <th:block th:include="global :: head"></th:block> /*/-->
    <title>HomeKeep</title>
    <link rel="stylesheet" type="text/css" th:href="@{/css/global.css}">
	</head>
	<body>
		<header th:replace="global :: header"></header>
		<div class = "container">
			<div class = "row">
				<div class = "col-sm">
					<h1> Inbox </h1>

					<table>
						<tr th:each = "u :${usrs}">
			            		<td th:text = "${u.getFirstname()}"></td>
			            		<td th:text = "${u.getLastname()}"></td>
			            		<td><a th:href = "@{/api/messages/inbox/{id}(id = ${u.getId()})}">See Conversation</a></td>
			            </tr>
					</table>
				
				</div>
				<div class = "col-sm">
					<div  th:if="${secondId != null and secondId != currentId}">
						<form id="new-message" th:action="@{/api/messages/inbox/{id}(id = ${secondId})}" method = "post">
					        <div>
					        	<h2>Send a message</h2>
					      		<input type = "text" id = "recipient" name = "recipient" th:value = ${secondId}>
					        	<input type = "text" id = "content" name = "content">
					            <button type="submit">Send</button>
					        </div>
				        </form>
				    </div>
				    <div>
				    	<table>
							<tr th:each="message : ${msgs}">
								<div class = "container">
									
									<th>
										<td th:text = "${message.getOwner().getFirstname()}"></td> <td th:text = "${message.getOwner().getLastname()}"></td>
									</th>
						            <th>
						                <td th:text="${message.content.get()}"></td>
						            </th>
						            <th>
						            	Date: <td th:text="${message.getDate()}"></td>
						            </th>
					            </div>
				            </tr>
				            
						</table>
				    </div>
				    <div th:unless="${secondId != null and secondId != currentId}">
				    	Empty
				    </div>
				</div>
			</div>
		</div>
	</body>
</html>