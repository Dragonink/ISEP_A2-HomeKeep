<!DOCTYPE html>
<html lang="en">
	<head>
	 <!--/*/ <th:block th:include="global :: head"></th:block> /*/-->
    <title>HomeKeep</title>
    <link rel="stylesheet" type="text/css" th:href="@{/css/global.css}">
	</head>
	<body>
		<header th:replace="global :: header"></header>
		<div class = "container">
			<div class = "row">
				<div class = "col-sm">
					<h2 class = "text-center"> Inbox </h2>

					<tablem class = "table-striped">
						<tr th:each = "u :${usrs}">
							<div>
			            		<td><a class = "h5" 	th:href = "@{/api/messages/inbox/{id}(id = ${u.getId()})}"><p th:text = "${u.getFirstname() + ' ' + u.getLastname()}"></p></a></td>
			            	</div>
			            </tr>
					</table>
				
				</div>
				<div class = "col-sm">
					
				    <div>
				    	<table>
				    		<h2 th:if= "${secondId != null and secondId != currentId}"  class = "text-center" th:text = "'Conversation with '+${recipient.getFirstname()}"></h2>	
							<tr th:each="message : ${msgs}">
								<div class = "container">
									
									<th>
										<td> <p class  ="h6" th:text = "${message.getOwner().getFirstname() + ' ' + message.getOwner().getLastname() + ': '}"></p></td>
									</th>
						            <th>
						                <td> <p class = "h6" th:text="${message.content.get()}"></p></td>
						            </th>
						            <th>
						            	<td> <p class = "h6" th:text="'Date: ' + ${message.getDate()}"></p></td>
						            </th>
					            </div>
				            </tr>
				            
						</table>
				    </div>
				    <div th:unless="${secondId != null and secondId != currentId}">
				    	<h2 class = "text.center">Start a Conversation</h2>
				    </div>
				    <div  th:if="${secondId != null and secondId != currentId}">
						<form id="new-message" th:action="@{/api/messages/inbox/{id}(id = ${secondId})}" method = "post">
					        <div>
					        	<h2 class = "text-center" th:text = "'Send a message to '+${recipient.getFirstname()}"></h2>
					      		<input type = "hidden" id = "recipient" name = "recipient" th:value = ${secondId} >
					        	<input type = "text" id = "content" name = "content" required>
					            <button type="submit">Send</button>
					        </div>
				        </form>
				    </div>
				</div>
			</div>
		</div>
	</body>
</html>